<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title> Day-of-the-week Calculator</title>
</head>
<body>
  <div id="app"></div>

  <script>
    document.getElementById('app').innerHTML = `
      <style>
        body {
          font-family: 'Georgia', serif;
          background-color: #f9f5e8;
          color: #333;
          line-height: 1.6;
          padding: 0;
          margin: 0;
        }
        .tool-container {
          max-width: 800px;
          margin: 20px auto;
          padding: 25px;
          background: white;
          border-radius: 5px;
          box-shadow: 0 0 15px rgba(0,0,0,0.1);
          border-top: 5px solid #ad2a24;
        }
        h1 {
          color: #ad2a24;
          text-align: center;
          font-size: 28px;
          margin-bottom: 25px;
          font-weight: normal;
          border-bottom: 1px solid #eee;
          padding-bottom: 10px;
        }
        select, input, button {
          padding: 8px 12px;
          margin: 5px;
          font-size: 16px;
          font-family: 'Georgia', serif;
          border: 1px solid #ddd;
          border-radius: 4px;
        }
        button {
          background-color: #ad2a24;
          color: white;
          border: none;
          cursor: pointer;
          transition: background-color 0.3s;
        }
        button:hover {
          background-color: #8a221d;
        }
        #output {
          margin-top: 25px;
          padding: 20px;
          background: #f9f5e8;
          border-left: 4px solid #ad2a24;
        }
        table {
          border-collapse: collapse;
          width: 100%;
          margin: 20px 0;
        }
        th, td {
          padding: 8px;
          text-align: center;
          border: 1px solid #ddd;
        }
        th {
          background-color: #f2f2f2;
        }
        .highlight {
          background-color: #ad2a24;
          color: white;
          font-weight: bold;
        }
        .special-day {
          color: #ad2a24;
          font-weight: bold;
        }
        .fact-item {
          margin-bottom: 15px;
          color: #ad2a24;
          font-size: 18px;
          list-style-type: disc;
          list-style-position: inside;
        }
        .error-message {
          color: #ad2a24;
          font-weight: bold;
          margin-top: 10px;
        }
        .facts-list {
          padding-left: 20px;
          margin: 20px 0;
        }
      </style>

      <div class="tool-container">
        <h1>Day of the week Calculator</h1>

        <label for="month">Month:</label>
        <select id="month"></select>

        <label for="day">Day:</label>
        <input type="number" id="day" min="1" max="31" placeholder="Day">

        <label for="year">Year:</label>
        <input type="number" id="year" placeholder="Year">

        <br><br>
        <button onclick="calculate()">Calculate</button>
        <button onclick="resetTool()">Reset</button>

        <div id="output"></div>
      </div>
    `;

    const monthNames = [
      "January", "February", "March", "April", "May", "June",
      "July", "August", "September", "October", "November", "December"
    ];

    const daysInMonth = (month, year) => {
      return new Date(year, month + 1, 0).getDate();
    };

    const isLeapYear = (year) => {
      return (year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0);
    };

    const getNextLeapYear = (currentYear) => {
      let year = currentYear + 1;
      while (true) {
        if (isLeapYear(year)) return year;
        year++;
      }
    };

    const getPreviousLeapYear = (currentYear) => {
      let year = currentYear - 1;
      while (true) {
        if (isLeapYear(year)) return year;
        year--;
      }
    };

    const getFridaysThe13thInYear = (year) => {
      const fridays = [];
      for (let month = 0; month < 12; month++) {
        const date = new Date(year, month, 13);
        if (date.getDay() === 5) { // 5 is Friday
          fridays.push(monthNames[month]);
        }
      }
      return fridays;
    };

    const populateDropdowns = () => {
      const monthSelect = document.getElementById("month");
      
      // Months
      monthSelect.innerHTML = monthNames.map((m, i) => `<option value="${i}">${m}</option>`).join("");

      // Default to today's date
      const today = new Date();
      monthSelect.value = today.getMonth();
      document.getElementById("day").value = today.getDate();
      document.getElementById("year").value = today.getFullYear();
    };

    const validateDate = (month, day, year) => {
      // Basic validation
      if (isNaN(month) || isNaN(day) || isNaN(year)) {
        return false;
      }
      
      // Check if day is valid for the month
      const maxDays = daysInMonth(month, year);
      if (day < 1 || day > maxDays) {
        return false;
      }
      
      // Additional year validation if needed
      if (year < 1000 || year > 9999) {
        return false;
      }
      
      return true;
    };

    const calculate = () => {
      const month = parseInt(document.getElementById("month").value);
      const day = parseInt(document.getElementById("day").value);
      const year = parseInt(document.getElementById("year").value);
      
      // Validate the date
      if (!validateDate(month, day, year)) {
        document.getElementById("output").innerHTML = `
          <div class="error-message">Invalid date selected. Please check the day is valid for the selected month.</div>
        `;
        return;
      }
      
      const date = new Date(year, month, day);

      if (isNaN(date.getTime())) {
        document.getElementById("output").innerHTML = "<div class='error-message'>Invalid date selected.</div>";
        return;
      }

      const dayOfWeek = date.toLocaleDateString('en-US', { weekday: 'long' });
      const fullDate = `${monthNames[month]} ${day}, ${year}`;
      const start = new Date(year, 0, 1);
      const dayNum = Math.floor((date - start) / (1000 * 60 * 60 * 24)) + 1;
      const totalDaysInYear = isLeapYear(year) ? 366 : 365;
      const remainingDays = totalDaysInYear - dayNum;
      const weekdayInMonth = Math.floor((day - 1) / 7) + 1;

      // Friday the 13th check
      const isFridayThe13th = day === 13 && date.getDay() === 5;
      const fridayThe13thInfo = isFridayThe13th 
        ? `<div class="special-day">This is Friday the 13th! Considered unlucky in many cultures.</div>`
        : '';

      // Leap year info
      let leapYearInfo = '';
      if (month === 1 && day === 29) { // February 29
        const prevLeap = getPreviousLeapYear(year);
        const nextLeap = getNextLeapYear(year);
        leapYearInfo = `
          <div class="special-day">
            This is Leap Day! The previous Leap Day was in ${prevLeap}. 
            The next Leap Day will be in ${nextLeap}.
          </div>
        `;
      }

      const facts = `
        <h2>${fullDate}</h2>
        <div style="font-size: 1.2em; margin-bottom: 15px;">It's a <strong>${dayOfWeek}</strong></div>
        
        ${fridayThe13thInfo}
        ${leapYearInfo}
        
        <div class="facts-list">
          <div class="fact-item">• It is the ${weekdayInMonth}${getOrdinalSuffix(weekdayInMonth)} ${dayOfWeek} of ${monthNames[month]}.</div>
          <div class="fact-item">• It is day #${dayNum} of ${totalDaysInYear} (${remainingDays} days remaining).</div>
          <div class="fact-item">• ${monthNames[month]} has ${daysInMonth(month, year)} days.</div>
          <div class="fact-item">• ${year} is ${isLeapYear(year) ? '' : 'not '}a leap year.</div>
        </div>
        
        ${generateCalendar(month, year, day)}
      `;

      document.getElementById("output").innerHTML = facts;
    };

    const getOrdinalSuffix = (num) => {
      const j = num % 10, k = num % 100;
      if (j === 1 && k !== 11) return 'st';
      if (j === 2 && k !== 12) return 'nd';
      if (j === 3 && k !== 13) return 'rd';
      return 'th';
    };

    const resetTool = () => {
      populateDropdowns();
      document.getElementById("day").value = '';
      document.getElementById("year").value = '';
      document.getElementById("output").innerHTML = "";
    };

    const generateCalendar = (month, year, selectedDay) => {
      const firstDay = new Date(year, month, 1).getDay();
      const numDays = daysInMonth(month, year);
      let calendar = "<h3>Calendar View</h3><table><tr><th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th><th>Thu</th><th>Fri</th><th>Sat</th></tr><tr>";

      for (let i = 0; i < firstDay; i++) calendar += "<td></td>";

      for (let d = 1; d <= numDays; d++) {
        const currentDate = new Date(year, month, d);
        const isSelected = d === selectedDay ? "class='highlight'" : "";
        const isFriday13th = d === 13 && currentDate.getDay() === 5 ? "style='color:#ad2a24;font-weight:bold'" : "";
        calendar += `<td ${isSelected} ${isFriday13th}>${d}</td>`;
        if (currentDate.getDay() === 6) calendar += "</tr><tr>";
      }

      calendar += "</tr></table>";
      return calendar;
    };

    // Initialize on load
    window.onload = populateDropdowns;
  </script>
</body>
</html>